"use strict";(self["webpackChunkebookstore"]=self["webpackChunkebookstore"]||[]).push([[240],{206:function(t,e,i){var s=i(8262),o=i(6294),a=i(6455),r=i.n(a);e["Z"]={data(){return{favorite:JSON.parse(localStorage.getItem("favorite"))||[],favoriteId:JSON.parse(localStorage.getItem("favoriteId"))||[],resentlyViewdProducts:JSON.parse(localStorage.getItem("resentlyViewdProducts"))||[]}},watch:{favorite:{handler(){localStorage.setItem("favorite",JSON.stringify(this.favorite))},deep:!0},favoriteId:{handler(){localStorage.setItem("favoriteId",JSON.stringify(this.favoriteId))},deep:!0},resentlyViewdProducts:{handler(){localStorage.setItem("resentlyViewdProducts",JSON.stringify(this.resentlyViewdProducts))},deep:!0}},methods:{...(0,s.nv)(o.Z,["pushMsg"]),toggleFavorite(t){const e=this.favorite.findIndex((e=>e.id===t.id));-1===e?(this.favorite.push(t),this.favoriteId.push(t.id),r().fire({position:"center",icon:"success",title:"已成功收藏",showConfirmButton:!1,timer:2e3})):(this.favorite.splice(e,1),this.favoriteId.splice(e,1),r().fire({position:"center",icon:"warning",title:"已取消收藏",showConfirmButton:!1,timer:2e3})),this.emitter.emit("getfavorite")},removeFavoriteItem(t){const e=this.favorite.findIndex((e=>e.id===t.id));this.favorite.splice(e,1),this.favoriteId.splice(e,1),r().fire({position:"center",icon:"warning",title:"已取消收藏",showConfirmButton:!1,timer:2e3})},getLocalStorage(){return JSON.parse(localStorage.getItem("favorite"))},resentlyViewed(t){const e=this.resentlyViewdProducts.findIndex((e=>e.id===t.id));-1===e?(this.resentlyViewdProducts.unshift(t),this.resentlyViewdProducts.length>10&&this.resentlyViewdProducts.pop()):-1!==e&&(this.resentlyViewdProducts.splice(e,1),this.resentlyViewdProducts.unshift(t))}}}},7240:function(t,e,i){i.r(e),i.d(e,{default:function(){return G}});i(6699);var s=i(6252),o=i(3577),a=i(9963);const r=(0,s._)("div",{class:"spinner-border text-primary m-5",role:"status"},[(0,s._)("span",{class:"visually-hidden"},"Loading...")],-1),n={class:"list-base section_category bg-light"},c={class:"container"},l={class:"row"},d={class:"col-lg-2 mb-3"},g={class:"list-group text-center"},u=["onClick"],p={class:"col-lg-10 section_products bg-light"},h={class:"row row-cols-1 row-cols-md-2 row-cols-lg-3"},v={class:"card h-100 shadow-sm"},f={class:"badge badge-pill badge-secondaryLight"},m=["onClick"],y=["src"],w={class:"px-1 position-absolute top-0 end-0 mt-2 me-2",style:{cursor:"pointer"}},_={class:"card-body"},b={class:"card-text"},k={class:"card-title"},C=["innerHTML"],I={class:"prices d-flex justify-content-between mb-auto"},x={class:"text-decoration-line-through text-gray me-5"},P={class:"fs-5 fw-bolder"},S=["onClick"],L=(0,s._)("span",null,[(0,s._)("i",{class:"fas fa-shopping-cart"})],-1),V=(0,s.Uk)(" 加入購物車 "),N=[L,V],Z=(0,s._)("div",{class:"bg-light",style:{height:"40px"}},null,-1);function $(t,e,i,L,V,$){const M=(0,s.up)("LoadingView"),D=(0,s.up)("ListBanner"),J=(0,s.up)("router-link"),O=(0,s.up)("font-awesome-icon");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(M,{class:"loading",active:V.isLoading},{default:(0,s.w5)((()=>[r])),_:1},8,["active"]),(0,s.Wm)(D,{title:V.title},null,8,["title"]),(0,s._)("section",n,[(0,s._)("div",c,[(0,s._)("div",l,[(0,s._)("div",d,[(0,s._)("div",g,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(V.categories,(t=>((0,s.wg)(),(0,s.iD)("button",{type:"button",class:(0,o.C_)(["list-group-item list-group-item-action fw-bolder py-3 fs-5",V.isActive===t.category?"active":""]),key:t.category,onClick:e=>$.filterCategory(t.category)},(0,o.zw)(t.name),11,u)))),128))])]),(0,s._)("div",p,[(0,s._)("div",h,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(V.products,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e.id,class:"col mb-4"},[(0,s._)("div",v,[(0,s._)("span",f,(0,o.zw)(e.category),1),(0,s._)("div",{class:"img-wrap position-relative ps-0",onClick:(0,a.iM)((t=>$.getProducts(e.category)),["prevent"])},[(0,s.Wm)(J,{to:`/product/${e.id}`},{default:(0,s.w5)((()=>[(0,s._)("img",{src:e.imageUrl,class:"card-img-top w-100"},null,8,y)])),_:2},1032,["to"]),(0,s._)("span",w,[t.favoriteId.includes(e.id)?((0,s.wg)(),(0,s.j4)(O,{key:0,icon:["fa","heart"],class:"fs-4 text-danger","data-bs-toggle":"tooltip","data-bs-placement":"buttom",title:"取消收藏",onClick:(0,a.iM)((i=>t.toggleFavorite(e)),["prevent"])},null,8,["onClick"])):((0,s.wg)(),(0,s.j4)(O,{key:1,icon:["far","heart"],class:"fs-4 text-danger","data-bs-toggle":"tooltip","data-bs-placement":"buttom",title:"加入收藏",onClick:(0,a.iM)((i=>t.toggleFavorite(e)),["prevent"])},null,8,["onClick"]))])],8,m),(0,s._)("div",_,[(0,s._)("div",b,[(0,s._)("h5",k,(0,o.zw)(e.title),1),(0,s._)("p",{class:"card-content",innerHTML:e.content},null,8,C)]),(0,s._)("div",null,[(0,s._)("p",I,[(0,s._)("span",x,"NT$ "+(0,o.zw)(e.origin_price)+"/人",1),(0,s._)("span",P,"NT$ "+(0,o.zw)(e.price)+"/人",1)])])]),(0,s._)("button",{type:"button",class:"btn btn-secondary btn-addTocart",onClick:(0,a.iM)((i=>t.addToCart(e)),["prevent","stop"])},N,8,S)])])))),128))])])])])]),Z],64)}var M=i(206);const D={class:"list-banner"},J={class:"title"},O={class:"container"},T={class:"row justify-content-end"},z={class:"col-md-6"},A={class:"text-white"};function B(t,e,i,a,r,n){return(0,s.wg)(),(0,s.iD)("section",D,[(0,s._)("div",J,[(0,s._)("div",O,[(0,s._)("div",T,[(0,s._)("div",z,[(0,s._)("h2",A,(0,o.zw)(i.title),1)])])])])])}var H={props:{title:{type:String,default:""}},data(){return{}}},j=i(3744);const F=(0,j.Z)(H,[["render",B]]);var W=F,Y=i(8262),K=i(4677),U=i(6294),q={components:{ListBanner:W},data(){return{products:[],isActive:"",isLoading:"",title:"行程列表",categories:[{category:"",name:"全部"},{category:"亞洲",name:"亞洲"},{category:"歐洲",name:"歐洲"},{category:"非洲",name:"非洲"},{category:"澳洲",name:"澳洲"},{category:"美洲",name:"美洲"}]}},mixins:[M.Z],created(){const{pathCategory:t}=this.$route.params;t&&(this.category=this.$route.params.category,this.isActive=this.category),this.getProducts(t)},methods:{...(0,Y.nv)(K.Z,["addToCart"]),...(0,Y.nv)(U.Z,["pushMsg"]),filterCategory(t){this.category=t,this.getProducts(t)},getProducts(t){this.isActive="";let e="https://vue3-course-api.hexschool.io/api/claire-api/products/all";t&&(e=`https://vue3-course-api.hexschool.io/v2/api/claire-api/products?category=${t}`,this.isActive=t),this.isLoading=!0,this.$http.get(e).then((t=>{this.products=t.data.products,this.isLoading=!1})).catch((()=>{this.isLoading=!1}))},computed:{...(0,Y.rn)(K.Z,["cartData"]),...(0,Y.rn)(U.Z,["isLoadingItem"])},mounted(){void 0!==this.$route.params.category&&(this.category=this.$route.params.category,this.isActive=this.category),this.getProducts()}}};const E=(0,j.Z)(q,[["render",$]]);var G=E}}]);
//# sourceMappingURL=240.64211ce3.js.map