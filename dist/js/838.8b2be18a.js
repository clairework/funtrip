"use strict";(self["webpackChunkebookstore"]=self["webpackChunkebookstore"]||[]).push([[838],{1137:function(s,e,t){t.d(e,{Z:function(){return y}});var a=t(6252),r=t(3577);const l={class:"zones section_process py-5"},d={class:"container"},i={class:"row justify-content-center"},o={class:"col-md-10"},n={class:"step-wrap"},c=(0,a._)("div",{class:"step step1 done"},[(0,a._)("h3",null,"1"),(0,a._)("span",{class:"txt"},"確認訂單")],-1),p=(0,a._)("h3",null,"2",-1),u=(0,a._)("span",{class:"txt"},"確認付款",-1),m=[p,u],b=(0,a._)("h3",null,"3",-1),_=(0,a._)("span",{class:"txt"},"完成訂單",-1),h=[b,_],f={class:"progress"};function v(s,e,t,p,u,b){return(0,a.wg)(),(0,a.iD)("section",l,[(0,a._)("div",d,[(0,a._)("div",i,[(0,a._)("div",o,[(0,a._)("div",n,[c,(0,a._)("div",{class:(0,r.C_)(["step step2",{done:2===t.step||3===t.step}])},m,2),(0,a._)("div",{class:(0,r.C_)(["step step3",{done:3===t.step}])},h,2)]),(0,a._)("div",f,[(0,a._)("div",{class:(0,r.C_)(["progress-bar bg-primaryLight",{step2:2===t.step,step3:3===t.step}]),role:"progressbar","aria-valuenow":"50","aria-valuemin":"0","aria-valuemax":"100"},null,2)])])])])])}var w={data(){return{}},props:["step"]},g=t(3744);const x=(0,g.Z)(w,[["render",v]]);var y=x},6838:function(s,e,t){t.r(e),t.d(e,{default:function(){return es}});var a=t(6252),r=t(3577),l=t(9963);const d=s=>((0,a.dD)("data-v-790e1a64"),s=s(),(0,a.Cn)(),s),i=d((()=>(0,a._)("div",{class:"spinner-border text-primary m-5",role:"status"},[(0,a._)("span",{class:"visually-hidden"},"Loading...")],-1))),o={class:"bg-light"},n={class:"container pt-14 pb-5 pb-md-9"},c={class:"row justify-content-center"},p={class:"col-md-8 mb-6 mb-md-0"},u={class:"position-sticky top-20"},m={class:"mb-8"},b=d((()=>(0,a._)("div",{class:"d-flex mb-4"},[(0,a._)("p",{class:"text-primaryDark fw-bold fs-4 fs-md-3 p-2"},"訂單編號")],-1))),_={class:"d-flex flex-column flex-md-row justify-content-md-between align-items-center"},h=d((()=>(0,a._)("div",{class:"d-flex mb-4"},[(0,a._)("p",{class:"text-primaryDark fw-bold fs-4 fs-md-3 p-2"},"訂單內容")],-1))),f={class:"table align-middle"},v=d((()=>(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",{class:"d-none d-md-table-cell text-start",width:"40%"},"名稱"),(0,a._)("th",{class:"d-none d-md-table-cell text-start",width:"30%"},"單價"),(0,a._)("th",{class:"d-none d-md-table-cell text-center",width:"30%"},"數量")])],-1))),w={class:"d-flex align-items-center p-3"},g=["src","alt"],x={class:"cart-body text-start"},y={class:"fw-bold"},k={class:"fw-bold"},D={key:0,class:"text-danger fw-bold"},L={width:"20%"},I={class:"fw-bold text-primaryDark"},C={class:"text-center",width:"20%"},$={class:"text-primaryDark fw-bold text-end mb-3 fs-md-4"},z={class:"col-md-4"},O={class:"bg-primaryLight p-4 p-md-8 shadow"},M=d((()=>(0,a._)("h2",{class:"category fs-4 fs-md-3 d-inline-block text-primaryDark p-2 fw-bold mb-6"},"收件人資料",-1))),Z={class:"mb-3"},j=d((()=>(0,a._)("label",{for:"email",class:"form-label fw-bold text-white"},"Email",-1))),T=["value"],q={class:"mb-3"},H=d((()=>(0,a._)("label",{for:"name",class:"form-label fw-bold text-white"},"收件人姓名",-1))),N=["value"],P={class:"mb-3"},S=d((()=>(0,a._)("label",{for:"tel",class:"form-label fw-bold text-white"},"收件人電話",-1))),W=["value"],Y={class:"mb-3"},E=d((()=>(0,a._)("label",{for:"address",class:"form-label fw-bold text-white"},"收件人地址",-1))),K=["value"],U={class:"mb-3"},V=d((()=>(0,a._)("label",{for:"message",class:"form-label fw-bold text-white"},"備註",-1))),A=["value"],B={class:"text-end"};function F(s,e,t,d,F,G){const J=(0,a.up)("LoadingView"),Q=(0,a.up)("OrderSteps");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(J,{class:"loading",active:F.isLoading},{default:(0,a.w5)((()=>[i])),_:1},8,["active"]),(0,a._)("div",o,[(0,a.Wm)(Q,{orderId:F.order,step:F.step},null,8,["orderId","step"]),(0,a._)("div",n,[(0,a._)("div",c,[(0,a._)("div",p,[(0,a._)("div",u,[(0,a._)("div",m,[b,(0,a._)("div",_,[(0,a._)("p",{ref:"orderId",class:"fs-5 fw-bold text-primary mb-2 mb-md-0"},(0,r.zw)(F.order.id),513),(0,a._)("div",{class:"btn btn btn-primaryDark w-100 w-md-auto text-white fs-small",onClick:e[0]||(e[0]=s=>G.copyOrderId(F.order.id))}," 複製訂單編號")])]),h,(0,a._)("table",f,[v,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(F.order.products,(s=>((0,a.wg)(),(0,a.iD)("tr",{key:s.id},[(0,a._)("td",null,[(0,a._)("div",w,[(0,a._)("img",{class:"imgbox_small1 me-4",src:s.product.imageUrl,alt:s.product.title},null,8,g),(0,a._)("div",x,[(0,a._)("p",y,(0,r.zw)(s.product.title),1),(0,a._)("p",k,(0,r.zw)(s.product.author),1),s.coupon?((0,a.wg)(),(0,a.iD)("p",D,"已套用優惠券")):(0,a.kq)("",!0)])])]),(0,a._)("td",L,[(0,a._)("p",I,"NT$ "+(0,r.zw)(s.product.price),1)]),(0,a._)("td",C,[(0,a._)("p",null,"x "+(0,r.zw)(s.qty),1)])])))),128))])]),(0,a._)("div",null,[(0,a._)("p",$," 應付金額 : NT$"+(0,r.zw)(Math.round(F.order.total)),1)])])]),(0,a._)("div",z,[(0,a._)("form",O,[M,(0,a._)("div",Z,[j,(0,a._)("input",{id:"email",name:"email",type:"email",class:"form-control border-0",value:F.order.user.email,disabled:""},null,8,T)]),(0,a._)("div",q,[H,(0,a._)("input",{id:"name",name:"姓名",type:"text",class:"form-control border-0",value:F.order.user.name,disabled:""},null,8,N)]),(0,a._)("div",P,[S,(0,a._)("input",{id:"tel",name:"電話",type:"text",class:"form-control border-0",value:F.order.user.tel,disabled:""},null,8,W)]),(0,a._)("div",Y,[E,(0,a._)("input",{id:"address",name:"地址",type:"text",class:"form-control border-0",value:F.order.user.address,disabled:""},null,8,K)]),(0,a._)("div",U,[V,(0,a._)("textarea",{id:"message",class:"form-control min-h-25 border-0",value:F.order.message,disabled:""},null,8,A)]),(0,a._)("div",B,[(0,a._)("button",{type:"submit",class:"btn btn-primaryDark text-white w-100",onClick:e[1]||(e[1]=(0,l.iM)(((...s)=>G.pay&&G.pay(...s)),["prevent"]))},"確認付款")])])])])])])],64)}var G=t(8262),J=t(6294),Q=t(1137),R={data(){return{step:2,order:{user:{},products:{}},orderProducts:[],orderId:this.$route.params.id,isLoading:!1}},components:{OrderSteps:Q.Z},methods:{...(0,G.nv)(J.Z,["pushMsg"]),getOrders(s){this.isLoading=!0,this.$http.get(`https://vue3-course-api.hexschool.io/api/claire-api/order/${s}`).then((s=>{this.order=s.data.order,this.orderProducts=Object.keys(this.order.products).map((s=>this.order.products[s])),this.isLoading=!1})).catch((()=>{this.isLoading=!1}))},pay(){this.isLoading=!0,this.$http.post(`https://vue3-course-api.hexschool.io/api/claire-api/pay/${this.orderId}`).then((s=>{this.isLoading=!1,this.pushMsg(s,"更新","已付款成功"),this.$router.push("/payment")}))},copyOrderId(s){navigator.clipboard.writeText(s).then((()=>{this.pushMsg(!0,"複製","您已成功複製優惠碼!")}))}},mounted(){this.getOrders(this.orderId)}},X=t(3744);const ss=(0,X.Z)(R,[["render",F],["__scopeId","data-v-790e1a64"]]);var es=ss}}]);
//# sourceMappingURL=838.8b2be18a.js.map