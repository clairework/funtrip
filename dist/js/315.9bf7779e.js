(self["webpackChunkebookstore"]=self["webpackChunkebookstore"]||[]).push([[315],{2705:function(t,e,i){var o=i(5639),r=o.Symbol;t.exports=r},4239:function(t,e,i){var o=i(2705),r=i(9607),n=i(2333),s="[object Null]",c="[object Undefined]",a=o?o.toStringTag:void 0;function u(t){return null==t?void 0===t?c:s:a&&a in Object(t)?r(t):n(t)}t.exports=u},7561:function(t,e,i){var o=i(7990),r=/^\s+/;function n(t){return t?t.slice(0,o(t)+1).replace(r,""):t}t.exports=n},1957:function(t,e,i){var o="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g;t.exports=o},9607:function(t,e,i){var o=i(2705),r=Object.prototype,n=r.hasOwnProperty,s=r.toString,c=o?o.toStringTag:void 0;function a(t){var e=n.call(t,c),i=t[c];try{t[c]=void 0;var o=!0}catch(a){}var r=s.call(t);return o&&(e?t[c]=i:delete t[c]),r}t.exports=a},2333:function(t){var e=Object.prototype,i=e.toString;function o(t){return i.call(t)}t.exports=o},5639:function(t,e,i){var o=i(1957),r="object"==typeof self&&self&&self.Object===Object&&self,n=o||r||Function("return this")();t.exports=n},7990:function(t){var e=/\s/;function i(t){var i=t.length;while(i--&&e.test(t.charAt(i)));return i}t.exports=i},3279:function(t,e,i){var o=i(3218),r=i(7771),n=i(4841),s="Expected a function",c=Math.max,a=Math.min;function u(t,e,i){var u,f,l,d,p,h,v=0,m=!1,g=!1,y=!0;if("function"!=typeof t)throw new TypeError(s);function w(e){var i=u,o=f;return u=f=void 0,v=e,d=t.apply(o,i),d}function C(t){return v=t,p=setTimeout(b,e),m?w(t):d}function x(t){var i=t-h,o=t-v,r=e-i;return g?a(r,l-o):r}function I(t){var i=t-h,o=t-v;return void 0===h||i>=e||i<0||g&&o>=l}function b(){var t=r();if(I(t))return S(t);p=setTimeout(b,x(t))}function S(t){return p=void 0,y&&u?w(t):(u=f=void 0,d)}function B(){void 0!==p&&clearTimeout(p),v=0,u=h=f=p=void 0}function O(){return void 0===p?d:S(r())}function j(){var t=r(),i=I(t);if(u=arguments,f=this,h=t,i){if(void 0===p)return C(h);if(g)return clearTimeout(p),p=setTimeout(b,e),w(h)}return void 0===p&&(p=setTimeout(b,e)),d}return e=n(e)||0,o(i)&&(m=!!i.leading,g="maxWait"in i,l=g?c(n(i.maxWait)||0,e):l,y="trailing"in i?!!i.trailing:y),j.cancel=B,j.flush=O,j}t.exports=u},3218:function(t){function e(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}t.exports=e},7005:function(t){function e(t){return null!=t&&"object"==typeof t}t.exports=e},3448:function(t,e,i){var o=i(4239),r=i(7005),n="[object Symbol]";function s(t){return"symbol"==typeof t||r(t)&&o(t)==n}t.exports=s},7771:function(t,e,i){var o=i(5639),r=function(){return o.Date.now()};t.exports=r},4841:function(t,e,i){var o=i(7561),r=i(3218),n=i(3448),s=NaN,c=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,u=/^0o[0-7]+$/i,f=parseInt;function l(t){if("number"==typeof t)return t;if(n(t))return s;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=o(t);var i=a.test(t);return i||u.test(t)?f(t.slice(2),i?2:8):c.test(t)?s:+t}t.exports=l},206:function(t,e,i){"use strict";var o=i(8262),r=i(6294),n=i(6455),s=i.n(n);e["Z"]={data(){return{favorite:JSON.parse(localStorage.getItem("favorite"))||[],favoriteId:JSON.parse(localStorage.getItem("favoriteId"))||[],resentlyViewdProducts:JSON.parse(localStorage.getItem("resentlyViewdProducts"))||[]}},watch:{favorite:{handler(){localStorage.setItem("favorite",JSON.stringify(this.favorite))},deep:!0},favoriteId:{handler(){localStorage.setItem("favoriteId",JSON.stringify(this.favoriteId))},deep:!0},resentlyViewdProducts:{handler(){localStorage.setItem("resentlyViewdProducts",JSON.stringify(this.resentlyViewdProducts))},deep:!0}},methods:{...(0,o.nv)(r.Z,["pushMsg"]),toggleFavorite(t){const e=this.favorite.findIndex((e=>e.id===t.id));-1===e?(this.favorite.push(t),this.favoriteId.push(t.id),s().fire({position:"center",icon:"success",title:"已成功收藏",showConfirmButton:!1,timer:2e3})):(this.favorite.splice(e,1),this.favoriteId.splice(e,1),s().fire({position:"center",icon:"warning",title:"已取消收藏",showConfirmButton:!1,timer:2e3})),this.emitter.emit("getfavorite")},removeFavoriteItem(t){const e=this.favorite.findIndex((e=>e.id===t.id));this.favorite.splice(e,1),this.favoriteId.splice(e,1),s().fire({position:"center",icon:"warning",title:"已取消收藏",showConfirmButton:!1,timer:2e3})},getLocalStorage(){return JSON.parse(localStorage.getItem("favorite"))},resentlyViewed(t){const e=this.resentlyViewdProducts.findIndex((e=>e.id===t.id));-1===e?(this.resentlyViewdProducts.unshift(t),this.resentlyViewdProducts.length>10&&this.resentlyViewdProducts.pop()):-1!==e&&(this.resentlyViewdProducts.splice(e,1),this.resentlyViewdProducts.unshift(t))}}}},4677:function(t,e,i){"use strict";var o=i(9669),r=i.n(o),n=i(8262),s=i(6455),c=i.n(s),a=i(3279),u=i.n(a),f=i(6294);const l=(0,f.Z)();e["Z"]=(0,n.Q_)("cartStore",{state:()=>({cartData:{carts:[],final_total:""},coupon_code:""}),actions:{getCartList(){l.isBounced=!0,r().get("https://vue3-course-api.hexschool.io/api/claire-api/cart").then((t=>{this.cartData=t.data.data,l.isBounced=!1})).catch((()=>{l.pushMsg(!1,"載入","請重新整理")}))},updateCart(t,e=1){t.qty<=1?t.qty=1:t.qty>=t.product.inventory&&(t.qty=t.product.inventory),r().put(`https://vue3-course-api.hexschool.io/api/claire-api/cart/${t.id}`,{data:{product_id:t.product.id,qty:Number(t.qty)}}).then((t=>{this.getCartList(),c().fire({position:"center",icon:"success",title:"已成功更新購物車",showConfirmButton:!1,timer:2e3})})).catch((()=>{c().fire({position:"center",icon:"error",title:"更新購物車失敗",showConfirmButton:!1,timer:2e3})}))},delCartItem(t){r()["delete"](`https://vue3-course-api.hexschool.io/api/claire-api/cart/${t.id}`).then((t=>{this.getCartList(),c().fire({position:"center",icon:"success",title:"已成功刪除品項！",showConfirmButton:!1,timer:2e3})})).catch((()=>{c().fire({position:"center",icon:"error",title:"刪除品項失敗！",showConfirmButton:!1,timer:2e3})}))},delAllCart(t){l.isLoadingItem=t.id,r()["delete"]("https://vue3-course-api.hexschool.io/api/claire-api/carts").then((t=>{l.isLoadingItem="",this.getCartList(),c().fire({position:"center",icon:"success",title:"已成功刪除所有品項！",showConfirmButton:!1,timer:2e3})})).catch((()=>{l.isLoadingItem="",c().fire({position:"center",icon:"error",title:"刪除所有品項失敗！",showConfirmButton:!1,timer:2e3})}))},addToCart:u()((function(t,e=1){l.isLoadingItem=t.id;let i=this.cartData.carts.filter((e=>e.product_id===t.id));i={...i[0]};const o=i.qty+e;o>t.inventory?(c().fire({position:"center",icon:"warning",title:"已無庫存,暫時無法訂購",showConfirmButton:!1,timer:2e3}),l.isLoadingItem=""):r().post("https://vue3-course-api.hexschool.io/api/claire-api/cart",{data:{product_id:t.id,qty:e}}).then((t=>{this.getCartList(),c().fire({position:"center",icon:"success",title:"已成功加入購物車！",showConfirmButton:!1,timer:2e3}),l.isLoadingItem=""})).catch((()=>{c().fire({position:"center",icon:"error",title:"加入購物車失敗！",showConfirmButton:!1,timer:2e3})}))}),500),addCouponCode(){""===this.coupon?l.pushMsg(!1,"套用","你還沒填入優惠碼呢"):r().post("https://vue3-course-api.hexschool.io/api/claire-api/coupon",{data:{code:this.coupon_code}}).then((t=>{this.getCartList(),console.log(this.coupon_code),console.log(t),c().fire({position:"center",icon:"success",title:"已套用優惠券",showConfirmButton:!1,timer:2e3})})).catch((()=>{c().fire({position:"center",icon:"error",title:"套用優惠券失敗",showConfirmButton:!1,timer:2e3})}))},copyCouponCode(t){navigator.clipboard.writeText(t).then((()=>{c().fire({position:"center",icon:"success",title:"已成功領取優惠碼",showConfirmButton:!1,timer:2e3}),this.coupon_code=t}))}}})}}]);
//# sourceMappingURL=315.9bf7779e.js.map