(self["webpackChunkebookstore"]=self["webpackChunkebookstore"]||[]).push([[677],{2705:function(t,e,o){var i=o(5639),n=i.Symbol;t.exports=n},4239:function(t,e,o){var i=o(2705),n=o(9607),r=o(2333),c="[object Null]",s="[object Undefined]",a=i?i.toStringTag:void 0;function u(t){return null==t?void 0===t?s:c:a&&a in Object(t)?n(t):r(t)}t.exports=u},7561:function(t,e,o){var i=o(7990),n=/^\s+/;function r(t){return t?t.slice(0,i(t)+1).replace(n,""):t}t.exports=r},1957:function(t,e,o){var i="object"==typeof o.g&&o.g&&o.g.Object===Object&&o.g;t.exports=i},9607:function(t,e,o){var i=o(2705),n=Object.prototype,r=n.hasOwnProperty,c=n.toString,s=i?i.toStringTag:void 0;function a(t){var e=r.call(t,s),o=t[s];try{t[s]=void 0;var i=!0}catch(a){}var n=c.call(t);return i&&(e?t[s]=o:delete t[s]),n}t.exports=a},2333:function(t){var e=Object.prototype,o=e.toString;function i(t){return o.call(t)}t.exports=i},5639:function(t,e,o){var i=o(1957),n="object"==typeof self&&self&&self.Object===Object&&self,r=i||n||Function("return this")();t.exports=r},7990:function(t){var e=/\s/;function o(t){var o=t.length;while(o--&&e.test(t.charAt(o)));return o}t.exports=o},3279:function(t,e,o){var i=o(3218),n=o(7771),r=o(4841),c="Expected a function",s=Math.max,a=Math.min;function u(t,e,o){var u,f,p,l,h,d,v=0,m=!1,g=!1,y=!0;if("function"!=typeof t)throw new TypeError(c);function C(e){var o=u,i=f;return u=f=void 0,v=e,l=t.apply(i,o),l}function x(t){return v=t,h=setTimeout(j,e),m?C(t):l}function b(t){var o=t-d,i=t-v,n=e-o;return g?a(n,p-i):n}function w(t){var o=t-d,i=t-v;return void 0===d||o>=e||o<0||g&&i>=p}function j(){var t=n();if(w(t))return B(t);h=setTimeout(j,b(t))}function B(t){return h=void 0,y&&u?C(t):(u=f=void 0,l)}function L(){void 0!==h&&clearTimeout(h),v=0,u=d=f=h=void 0}function T(){return void 0===h?l:B(n())}function O(){var t=n(),o=w(t);if(u=arguments,f=this,d=t,o){if(void 0===h)return x(d);if(g)return clearTimeout(h),h=setTimeout(j,e),C(d)}return void 0===h&&(h=setTimeout(j,e)),l}return e=r(e)||0,i(o)&&(m=!!o.leading,g="maxWait"in o,p=g?s(r(o.maxWait)||0,e):p,y="trailing"in o?!!o.trailing:y),O.cancel=L,O.flush=T,O}t.exports=u},3218:function(t){function e(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}t.exports=e},7005:function(t){function e(t){return null!=t&&"object"==typeof t}t.exports=e},3448:function(t,e,o){var i=o(4239),n=o(7005),r="[object Symbol]";function c(t){return"symbol"==typeof t||n(t)&&i(t)==r}t.exports=c},7771:function(t,e,o){var i=o(5639),n=function(){return i.Date.now()};t.exports=n},4841:function(t,e,o){var i=o(7561),n=o(3218),r=o(3448),c=NaN,s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,u=/^0o[0-7]+$/i,f=parseInt;function p(t){if("number"==typeof t)return t;if(r(t))return c;if(n(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=n(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=i(t);var o=a.test(t);return o||u.test(t)?f(t.slice(2),o?2:8):s.test(t)?c:+t}t.exports=p},4677:function(t,e,o){"use strict";var i=o(9669),n=o.n(i),r=o(8262),c=o(6455),s=o.n(c),a=o(3279),u=o.n(a),f=o(6294);const p=(0,f.Z)();e["Z"]=(0,r.Q_)("cartStore",{state:()=>({cartData:{carts:[],final_total:""},coupon_code:""}),actions:{getCartList(){p.isBounced=!0,n().get("https://vue3-course-api.hexschool.io/api/claire-api/cart").then((t=>{this.cartData=t.data.data,p.isBounced=!1})).catch((()=>{p.pushMsg(!1,"載入","請重新整理")}))},updateCart(t,e=1){t.qty<=1?t.qty=1:t.qty>=t.product.inventory&&(t.qty=t.product.inventory),n().put(`https://vue3-course-api.hexschool.io/api/claire-api/cart/${t.id}`,{data:{product_id:t.product.id,qty:Number(t.qty)}}).then((t=>{this.getCartList(),s().fire({position:"center",icon:"success",title:"已成功更新購物車",showConfirmButton:!1,timer:2e3})})).catch((()=>{s().fire({position:"center",icon:"error",title:"更新購物車失敗",showConfirmButton:!1,timer:2e3})}))},delCartItem(t){n()["delete"](`https://vue3-course-api.hexschool.io/api/claire-api/cart/${t.id}`).then((t=>{this.getCartList(),s().fire({position:"center",icon:"success",title:"已成功刪除品項！",showConfirmButton:!1,timer:2e3})})).catch((()=>{s().fire({position:"center",icon:"error",title:"刪除品項失敗！",showConfirmButton:!1,timer:2e3})}))},delAllCart(t){p.isLoadingItem=t.id,n()["delete"]("https://vue3-course-api.hexschool.io/api/claire-api/carts").then((t=>{p.isLoadingItem="",this.getCartList(),s().fire({position:"center",icon:"success",title:"已成功刪除所有品項！",showConfirmButton:!1,timer:2e3})})).catch((()=>{p.isLoadingItem="",s().fire({position:"center",icon:"error",title:"刪除所有品項失敗！",showConfirmButton:!1,timer:2e3})}))},addToCart:u()((function(t,e=1){p.isLoadingItem=t.id;let o=this.cartData.carts.filter((e=>e.product_id===t.id));o={...o[0]};const i=o.qty+e;i>t.inventory?(s().fire({position:"center",icon:"warning",title:"已無庫存,暫時無法訂購",showConfirmButton:!1,timer:2e3}),p.isLoadingItem=""):n().post("https://vue3-course-api.hexschool.io/api/claire-api/cart",{data:{product_id:t.id,qty:e}}).then((t=>{this.getCartList(),s().fire({position:"center",icon:"success",title:"已成功加入購物車！",showConfirmButton:!1,timer:2e3}),p.isLoadingItem=""})).catch((()=>{s().fire({position:"center",icon:"error",title:"加入購物車失敗！",showConfirmButton:!1,timer:2e3})}))}),500),addCouponCode(){""===this.coupon?p.pushMsg(!1,"套用","你還沒填入優惠碼呢"):n().post("https://vue3-course-api.hexschool.io/api/claire-api/coupon",{data:{code:this.coupon_code}}).then((t=>{this.getCartList(),console.log(this.coupon_code),console.log(t),s().fire({position:"center",icon:"success",title:"已套用優惠券",showConfirmButton:!1,timer:2e3})})).catch((()=>{s().fire({position:"center",icon:"error",title:"套用優惠券失敗",showConfirmButton:!1,timer:2e3})}))},copyCouponCode(t){navigator.clipboard.writeText(t).then((()=>{s().fire({position:"center",icon:"success",title:"已成功領取優惠碼",showConfirmButton:!1,timer:2e3}),this.coupon_code=t}))}}})}}]);
//# sourceMappingURL=677.cec55b59.js.map